## Launches a session dbus instance
if [ -z "$DBUS_SESSION_BUS_ADDRESS" ]; then
   eval $(dbus-launch --sh-syntax --exit-with-session)
fi

## Launches a gpg-agent instance
if [[ $(gpg-agent --version | head -n 1 | awk '{print $3}') < 2.1 ]]; then
   eval $(gpg-agent --daemon --sh --write-env-file ~/.gpg-agent-info)
fi

## Remaps CapsLock
setxkbmap -layout us -variant intl -option ctrl:nocaps

## Set keyboard settings - 250 ms delay and 25 cps (characters per second) repeat rate.
## Adjust the values according to your preferances.
xset r rate 250 25

## Turn on/off system beep
xset b off

## Set screen display settings
xset s 300 60
xset dpms 600 700 800

## Lock the screen on inactivity
#xautolock -time 10 -locker slock &
xsidle slock &

## Detect and configure touchpad. See 'man synclient' for more info.
if [ -e /usr/X11R6/bin/synclient ]; then
    synclient ClickFinger1=0
    synclient ClickFinger2=0
    synclient ClickFinger3=0
    synclient RightButtonAreaLeft=0
    synclient RightButtonAreaTop=0
    synclient VertScrollDelta=-111
    synclient HorizScrollDelta=-111
    #synclient VertHysteresis=40
    #synclient HorizHysteresis=40
    synclient TapButton1=1
    synclient TapButton2=3
    synclient TapButton3=2
    synclient PalmDetect=1
    synclient VertTwoFingerScroll=1
    synclient HorizTwoFingerScroll=1

    syndaemon -t -k -i 2 -d &
fi

## Restore screen layout
if [ -e ~/.screenlayout/default.sh ]; then
    ~/.screenlayout/default.sh &
fi

## Set root window colour
xsetroot -solid "#2E3436" &

## Restore wallpaper
eval $(cat ~/.fehbg)

## Set urxvt settings
xrdb -merge ~/.Xresources

## Run syncthing sync
syncthing &

## Start a tmux server
tmux has || tmux new -d

## Start an emacs instance
emacs --daemon &
